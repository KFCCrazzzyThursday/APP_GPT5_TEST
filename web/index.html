<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Vocab Suite — Daily Plan + Review</title>
    <link rel="stylesheet" href="style.css" />
</head>

<body>
    <aside id="sidebar">
        <header>
            <h1>Vocab Suite</h1>
        </header>

        <nav>
            <button id="btn-choose-store" class="secondary">Choose Vocab Base…</button>
            <div id="store-path" class="store-path">(no base selected)</div>

            <hr class="sep" />

            <div class="field">
                <label for="daily-size">Daily target (words)</label>
                <input id="daily-size" type="number" min="10" step="10" value="100" />
            </div>
            <button id="btn-start-daily" class="primary">Start Daily Plan (Groups of 10)</button>

            <hr class="sep" />

            <div class="field">
                <label for="review-score-limit">Review by Score — deck size</label>
                <input id="review-score-limit" type="number" min="10" step="10" value="100" />
            </div>
            <button id="btn-review-today">Review Today (All)</button>
            <button id="btn-review-score">Review by Score (Ebbinghaus)</button>
        </nav>

        <section class="legend">
            <div><span class="dot todo"></span>Not Seen</div>
            <div><span class="dot weak"></span>Weak</div>
            <div><span class="dot ok"></span>Correct</div>
        </section>

        <section id="day-stats" class="day-stats">
            <div class="stat"><span class="label">Learned today (unique)</span><span class="value"
                    id="stat-today">0</span></div>
            <div class="stat"><span class="label">Total learned</span><span class="value" id="stat-total">0</span></div>
        </section>
    </aside>

    <main id="main" class="twocol">
        <!-- LEFT: Flashcards -->
        <section id="flashcard-panel">
            <div id="session-banner" class="banner hidden"></div>

            <div class="group-head">
                <div class="gh-left">
                    <span id="gh-mode">—</span>
                </div>
                <div class="gh-right">
                    <span id="gh-group">Group 0/0</span>
                </div>
            </div>

            <div class="card-container">
                <div class="card face-front">
                    <h1 id="fc-word">—</h1>
                    <div class="quick-actions">
                        <button id="btn-remember" class="btn-remember">✓ I Know (1/Y)</button>
                        <button id="btn-forget" class="btn-forget">✗ I Don't Know (2/N)</button>
                    </div>
                </div>

                <div class="card face-back hidden">
                    <h2 id="fc-back-word">—</h2>
                    <div id="fc-meaning" class="meaning">—</div>
                    <div id="fc-phrases" class="phrases"></div>
                    <div id="fc-example" class="example"></div>

                    <!-- Verify buttons show only if user chose "I Know" -->
                    <div class="verify-actions" id="verify-actions">
                        <button id="btn-correct">✓ Correct (1/Y)</button>
                        <button id="btn-wrong">✗ Wrong (2/N)</button>
                    </div>

                    <!-- Next-only for "I Don't Know" -->
                    <div class="verify-actions hidden" id="next-actions">
                        <button id="btn-next">Next → (Space/→)</button>
                    </div>
                </div>
            </div>

            <div class="progress-wrap">
                <div class="row">
                    <span class="progress-text" id="fc-progress-text">0/0 (Pass 1/1)</span>
                </div>
                <div class="progress">
                    <div class="progress-fill" id="fc-progress"></div>
                </div>
                <div id="heat" class="heat"></div>
            </div>
        </section>

        <!-- RIGHT: Chat + Stats -->
        <section id="chat-pane">
            <div id="charts">
                <div class="chart-card">
                    <svg id="donut" viewBox="0 0 120 120" role="img" aria-label="Mastery distribution">
                        <circle cx="60" cy="60" r="54" class="donut-track"></circle>
                        <circle cx="60" cy="60" r="54" class="donut-seg mastered" stroke-dasharray="0 339.292"></circle>
                        <circle cx="60" cy="60" r="54" class="donut-seg learned" stroke-dasharray="0 339.292"></circle>
                        <circle cx="60" cy="60" r="54" class="donut-seg notlearned" stroke-dasharray="339.292 0">
                        </circle>
                        <text x="60" y="60" text-anchor="middle" dominant-baseline="middle" class="donut-label"
                            id="donut-label">0%</text>
                    </svg>
                    <div class="legend2">
                        <span class="dot ok"></span><span>Mastered</span>
                        <span class="dot learned"></span><span>Learned</span>
                        <span class="dot todo"></span><span>Not learned</span>
                    </div>
                </div>
            </div>

            <section id="timeline"></section>

            <details id="logs">
                <summary id="logs-header">工具调用日志</summary>
                <pre id="logbox"></pre>
            </details>

            <footer id="inputbar">
                <textarea id="input" rows="1" placeholder="Shift+Enter 换行，Enter 发送"></textarea>
                <button id="btn-send" type="button">发送</button>
            </footer>
        </section>
    </main>

    <script src="app.js"></script>
</body>

</html>